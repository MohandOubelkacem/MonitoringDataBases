[{"Query_hash":"E0E5B47E23770EC3","Last_logical_reads":2,"Min_rows":5,"Total_physical_reads":0,"Max_elapsed_time":79,"Max_physical_reads":0,"Min_logical_writes":0,"Last_worker_time":79,"Min_clr_time":0,"Total_rows":5,"Total_clr_time":0,"SQL_statement":"SELECT * from users","Last_elapsed_time":79,"Max_rows":5,"Min_physical_reads":0,"SQL_handle":"020000000CAA9034F7638BC3874EF961CE06F00DE62A1CA50000000000000000000000000000000000000000","Min_worker_time":79,"Max_logical_reads":2,"Max_worker_time":79,"Last_physical_reads":0,"Total_worker_time":79,"Plan_generation_num":1,"Max_clr_time":0,"Date":"2019-04-02 21:25:37.867","Min_elapsed_time":79,"Last_logical_writes":0,"Total_elapsed_time":79,"Query_plan_hash":"075F1A06D78BBE7D","Last_rows":5,"Min_logical_reads":2,"Last_execution_time":"2019-04-02 21:25:37.783","Execution_count":1,"Total_logical_writes":0,"Max_logical_writes":0,"Total_logical_reads":2},
    {"Query_hash":"941E07FB4DBE7BDE","Last_logical_reads":17,"Min_rows":1,"Total_physical_reads":0,"Max_elapsed_time":765,"Max_physical_reads":0,"Min_logical_writes":0,"Last_worker_time":765,"Min_clr_time":0,"Total_rows":1,"Total_clr_time":0,"SQL_statement":"SELECT\nparam.parameter_id AS [ID],\nparam.name AS [Name],\nusrt.name AS [DataType],\nISNULL(baset.name, N'') AS [SystemType],\nCAST(CASE WHEN baset.name IN (N'nchar', N'nvarchar') AND param.max_length <> -1 THEN param.max_length/2 ELSE param.max_length END AS int) AS [Length],\nCAST(param.precision AS int) AS [NumericPrecision],\nCAST(param.scale AS int) AS [NumericScale],\nISNULL(xscparam.name, N'') AS [XmlSchemaNamespace],\nISNULL(s2param.name, N'') AS [XmlSchemaNamespaceSchema],\nISNULL( (case param.is_xml_document when 1 then 2 else 1 end), 0) AS [XmlDocumentConstraint],\ns1param.name AS [DataTypeSchema]\nFROM\nsys.all_objects AS udf\nINNER JOIN sys.all_parameters AS param ON (param.is_output = 0) AND (param.object_id=udf.object_id)\nLEFT OUTER JOIN sys.types AS usrt ON usrt.user_type_id = param.user_type_id\nLEFT OUTER JOIN sys.types AS baset ON (baset.user_type_id = param.system_type_id and baset.user_type_id = baset.system_type_id) or ((baset.system_type_id = param.system_type_id) and (baset.user_type_id = param.user_type_id) and (baset.is_user_defined = 0) and (baset.is_assembly_type = 1)) \nLEFT OUTER JOIN sys.xml_schema_collections AS xscparam ON xscparam.xml_collection_id = param.xml_collection_id\nLEFT OUTER JOIN sys.schemas AS s2param ON s2param.schema_id = xscparam.schema_id\nLEFT OUTER JOIN sys.schemas AS s1param ON s1param.schema_id = usrt.schema_id\nWHERE\n(udf.type in ('TF', 'FN', 'IF', 'FS', 'FT'))and(udf.name=@_msparam_0 and SCHEMA_NAME(udf.schema_id)=@_msparam_1)\nORDER BY\n[ID] ASC","Last_elapsed_time":765,"Max_rows":1,"Min_physical_reads":0,"SQL_handle":"020000004EE9FD0590490D7ED7B84E9531A964674F6DC0200000000000000000000000000000000000000000","Min_worker_time":765,"Max_logical_reads":17,"Max_worker_time":765,"Last_physical_reads":0,"Total_worker_time":765,"Plan_generation_num":1,"Max_clr_time":0,"Date":"2019-04-02 21:25:37.867","Min_elapsed_time":765,"Last_logical_writes":0,"Total_elapsed_time":765,"Query_plan_hash":"55E579A50859876A","Last_rows":1,"Min_logical_reads":17,"Last_execution_time":"2019-04-02 21:25:21.14","Execution_count":1,"Total_logical_writes":0,"Max_logical_writes":0,"Total_logical_reads":17},
    {"Query_hash":"EB86672C11D1769A","Last_logical_reads":91,"Min_rows":5,"Total_physical_reads":0,"Max_elapsed_time":1430,"Max_physical_reads":0,"Min_logical_writes":0,"Last_worker_time":1429,"Min_clr_time":0,"Total_rows":5,"Total_clr_time":0,"SQL_statement":"SELECT\nclmns.column_id AS [ID],\nclmns.name AS [Name],\nISNULL(dc.Name, N'') AS [DefaultConstraintName],\nclmns.is_nullable AS [Nullable],\nCAST(ISNULL(cik.index_column_id, 0) AS bit) AS [InPrimaryKey],\nclmns.is_identity AS [Identity],\nusrt.name AS [DataType],\nISNULL(baset.name, N'') AS [SystemType],\nCAST(CASE WHEN baset.name IN (N'nchar', N'nvarchar') AND clmns.max_length <> -1 THEN clmns.max_length/2 ELSE clmns.max_length END AS int) AS [Length],\nCAST(clmns.precision AS int) AS [NumericPrecision],\nCAST(clmns.scale AS int) AS [NumericScale],\nISNULL(xscclmns.name, N'') AS [XmlSchemaNamespace],\nISNULL(s2clmns.name, N'') AS [XmlSchemaNamespaceSchema],\nISNULL( (case clmns.is_xml_document when 1 then 2 else 1 end), 0) AS [XmlDocumentConstraint],\ns1clmns.name AS [DataTypeSchema],\nclmns.is_computed AS [Computed]\nFROM\nsys.all_objects AS udf\nINNER JOIN sys.all_columns AS clmns ON clmns.object_id=udf.object_id\nLEFT OUTER JOIN sys.default_constraints as dc ON clmns.default_object_id = dc.object_id\nLEFT OUTER JOIN sys.indexes AS ik ON ik.object_id = clmns.object_id and 1=ik.is_primary_key\nLEFT OUTER JOIN sys.index_columns AS cik ON cik.index_id = ik.index_id and cik.column_id = clmns.column_id and cik.object_id = clmns.object_id and 0 = cik.is_included_column\nLEFT OUTER JOIN sys.types AS usrt ON usrt.user_type_id = clmns.user_type_id\nLEFT OUTER JOIN sys.types AS baset ON (baset.user_type_id = clmns.system_type_id and baset.user_type_id = baset.system_type_id) or ((baset.system_type_id = clmns.system_type_id) and (baset.user_type_id = clmns.user_type_id) and (baset.is_user_defined = 0) and (baset.is_assembly_type = 1)) \nLEFT OUTER JOIN sys.xml_schema_collections AS xscclmns ON xscclmns.xml_collection_id = clmns.xml_collection_id\nLEFT OUTER JOIN sys.schemas AS s2clmns ON s2clmns.schema_id = xscclmns.schema_id\nLEFT OUTER JOIN sys.schemas AS s1clmns ON s1clmns.schema_id = usrt.schema_id\nWHERE\n(udf.type in ('TF', 'FN', 'IF', 'FS', 'FT'))and(udf.name=@_msparam_0 and SCHEMA_NAME(udf.schema_id)=@_msparam_1)\nORDER BY\n[ID] ASC","Last_elapsed_time":1430,"Max_rows":5,"Min_physical_reads":0,"SQL_handle":"02000000D33AFA06B185AADD408F8B0AB3555EEAF21EE5ED0000000000000000000000000000000000000000","Min_worker_time":1429,"Max_logical_reads":91,"Max_worker_time":1429,"Last_physical_reads":0,"Total_worker_time":1429,"Plan_generation_num":1,"Max_clr_time":0,"Date":"2019-04-02 21:25:37.867","Min_elapsed_time":1430,"Last_logical_writes":0,"Total_elapsed_time":1430,"Query_plan_hash":"934B7C4B3704071E","Last_rows":5,"Min_logical_reads":91,"Last_execution_time":"2019-04-02 21:25:21.63","Execution_count":1,"Total_logical_writes":0,"Max_logical_writes":0,"Total_logical_reads":91},
    {"Query_hash":"628326B559BF08B2","Last_logical_reads":17,"Min_rows":1,"Total_physical_reads":8,"Max_elapsed_time":1909,"Max_physical_reads":8,"Min_logical_writes":0,"Last_worker_time":1478,"Min_clr_time":0,"Total_rows":1,"Total_clr_time":0,"SQL_statement":"SELECT\nparam.is_readonly AS [IsReadOnly],\nparam.name AS [Name],\nparam.parameter_id AS [ID],\nparam.default_value AS [DefaultValue],\nparam.has_default_value AS [HasDefaultValue],\nusrt.name AS [DataType],\ns1param.name AS [DataTypeSchema],\nISNULL(baset.name, N'') AS [SystemType],\nCAST(CASE WHEN baset.name IN (N'nchar', N'nvarchar') AND param.max_length <> -1 THEN param.max_length/2 ELSE param.max_length END AS int) AS [Length],\nCAST(param.precision AS int) AS [NumericPrecision],\nCAST(param.scale AS int) AS [NumericScale],\nISNULL(xscparam.name, N'') AS [XmlSchemaNamespace],\nISNULL(s2param.name, N'') AS [XmlSchemaNamespaceSchema],\nISNULL( (case param.is_xml_document when 1 then 2 else 1 end), 0) AS [XmlDocumentConstraint],\nCASE WHEN usrt.is_table_type = 1 THEN N'structured' ELSE N'' END AS [UserType],\nudf.object_id AS [IDText],\ndb_name() AS [DatabaseName],\nparam.name AS [ParamName],\nCAST(\r\n case \r\n    when udf.is_ms_shipped = 1 then 1\r\n    when (\r\n        select \r\n            major_id \r\n        from \r\n            sys.extended_properties \r\n        where \r\n            major_id = udf.object_id and \r\n            minor_id = 0 and \r\n            class = 1 and \r\n            name = N'microsoft_database_tools_support') \r\n        is not null then 1\r\n    else 0\r\nend          \r\n             AS bit) AS [ParentSysObj],\n-1 AS [Number]\nFROM\nsys.all_objects AS udf\nINNER JOIN sys.all_parameters AS param ON (param.is_output = 0) AND (param.object_id=udf.object_id)\nLEFT OUTER JOIN sys.types AS usrt ON usrt.user_type_id = param.user_type_id\nLEFT OUTER JOIN sys.schemas AS s1param ON s1param.schema_id = usrt.schema_id\nLEFT OUTER JOIN sys.types AS baset ON (baset.user_type_id = param.system_type_id and baset.user_type_id = baset.system_type_id) or ((baset.system_type_id = param.system_type_id) and (baset.user_type_id = param.user_type_id) and (baset.is_user_defined = 0) and (baset.is_assembly_type = 1)) \nLEFT OUTER JOIN sys.xml_schema_collections AS xscparam ON xscparam.xml_collection_id = param.xml_collection_id\nLEFT OUTER JOIN sys.schemas AS s2param ON s2param.schema_id = xscparam.schema_id\nWHERE\n(param.name=@_msparam_0)and((udf.type in ('TF', 'FN', 'IF', 'FS', 'FT'))and(udf.name=@_msparam_1 and SCHEMA_NAME(udf.schema_id)=@_msparam_2))","Last_elapsed_time":1909,"Max_rows":1,"Min_physical_reads":8,"SQL_handle":"02000000460EF006453EB6BD450FCC2A5D9E9512C37701F90000000000000000000000000000000000000000","Min_worker_time":1478,"Max_logical_reads":17,"Max_worker_time":1478,"Last_physical_reads":8,"Total_worker_time":1478,"Plan_generation_num":1,"Max_clr_time":0,"Date":"2019-04-02 21:25:37.867","Min_elapsed_time":1909,"Last_logical_writes":0,"Total_elapsed_time":1909,"Query_plan_hash":"155422E67A22CE6D","Last_rows":1,"Min_logical_reads":17,"Last_execution_time":"2019-04-02 21:25:21.287","Execution_count":1,"Total_logical_writes":0,"Max_logical_writes":0,"Total_logical_reads":17},
    {"Query_hash":"FE1E07CD45683285","Last_logical_reads":0,"Min_rows":5,"Total_physical_reads":0,"Max_elapsed_time":106263,"Max_physical_reads":0,"Min_logical_writes":0,"Last_worker_time":8655,"Min_clr_time":0,"Total_rows":5,"Total_clr_time":0,"SQL_statement":"SELECT getdate() ddate, s2.dbid,\r\n    s1.sql_handle, \r\n    (SELECT TOP 1 SUBSTRING(s2.text,statement_start_offset / 2+1 ,\r\n      ( (CASE WHEN statement_end_offset = -1\r\n         THEN (LEN(CONVERT(nvarchar(max),s2.text)) * 2)\r\n         ELSE statement_end_offset END)  - statement_start_offset) / 2+1))  AS sql_statement,\r\n    execution_count,\r\n    plan_generation_num,\r\n    last_execution_time,  \r\n    total_worker_time,\r\n    last_worker_time,\r\n    min_worker_time,\r\n    max_worker_time,\r\n    total_physical_reads,\r\n    last_physical_reads,\r\n    min_physical_reads, \r\n    max_physical_reads, \r\n    total_logical_writes,\r\n    last_logical_writes,\r\n    min_logical_writes,\r\n    max_logical_writes,\r\n    total_logical_reads,\r\n    last_logical_reads,\r\n    min_logical_reads, \r\n    max_logical_reads,\r\n    total_elapsed_time,\r\n    last_elapsed_time,\r\n    min_elapsed_time,\r\n    max_elapsed_time,\r\n    total_clr_time,\r\n    max_clr_time,\r\n    min_clr_time,\r\n    total_rows,\r\n    min_rows,\r\n    max_rows,\r\n    last_rows,\r\n    query_hash,\r\n    query_plan_hash\r\n----into t_awr_stats\r\nFROM sys.dm_exec_query_stats AS s1\r\nCROSS APPLY sys.dm_exec_sql_text(sql_handle) AS s2 \r\nWHERE s2.objectid is null\r\norder by total_worker_time","Last_elapsed_time":106263,"Max_rows":5,"Min_physical_reads":0,"SQL_handle":"0200000021BDA82932F91AACC2ACDE4CD3A70B0B1241F9360000000000000000000000000000000000000000","Min_worker_time":8655,"Max_logical_reads":0,"Max_worker_time":8655,"Last_physical_reads":0,"Total_worker_time":8655,"Plan_generation_num":1,"Max_clr_time":0,"Date":"2019-04-02 21:25:37.867","Min_elapsed_time":106263,"Last_logical_writes":0,"Total_elapsed_time":106263,"Query_plan_hash":"827CD7C7367E5000","Last_rows":5,"Min_logical_reads":0,"Last_execution_time":"2019-04-02 21:25:27.897","Execution_count":1,"Total_logical_writes":0,"Max_logical_writes":0,"Total_logical_reads":0},
    {"Query_hash":"E0E5B47E23770EC3","Last_logical_reads":2,"Min_rows":5,"Total_physical_reads":0,"Max_elapsed_time":283,"Max_physical_reads":0,"Min_logical_writes":0,"Last_worker_time":131,"Min_clr_time":0,"Total_rows":50,"Total_clr_time":0,"SQL_statement":"SELECT * from users","Last_elapsed_time":131,"Max_rows":5,"Min_physical_reads":0,"SQL_handle":"020000000CAA9034F7638BC3874EF961CE06F00DE62A1CA50000000000000000000000000000000000000000","Min_worker_time":53,"Max_logical_reads":2,"Max_worker_time":282,"Last_physical_reads":0,"Total_worker_time":1165,"Plan_generation_num":1,"Max_clr_time":0,"Date":"2019-04-11 10:30:10.83","Min_elapsed_time":54,"Last_logical_writes":0,"Total_elapsed_time":1172,"Query_plan_hash":"075F1A06D78BBE7D","Last_rows":5,"Min_logical_reads":2,"Last_execution_time":"2019-04-11 10:30:06.703","Execution_count":10,"Total_logical_writes":0,"Max_logical_writes":0,"Total_logical_reads":20},
    {"Query_hash":"FE1E07CD45683285","Last_logical_reads":0,"Min_rows":1,"Total_physical_reads":0,"Max_elapsed_time":8134,"Max_physical_reads":0,"Min_logical_writes":0,"Last_worker_time":2860,"Min_clr_time":0,"Total_rows":17,"Total_clr_time":0,"SQL_statement":"SELECT getdate() ddate, s2.dbid,\r\n    s1.sql_handle, \r\n    (SELECT TOP 1 SUBSTRING(s2.text,statement_start_offset / 2+1 ,\r\n      ( (CASE WHEN statement_end_offset = -1\r\n         THEN (LEN(CONVERT(nvarchar(max),s2.text)) * 2)\r\n         ELSE statement_end_offset END)  - statement_start_offset) / 2+1))  AS sql_statement,\r\n    execution_count,\r\n    plan_generation_num,\r\n    last_execution_time,  \r\n    total_worker_time,\r\n    last_worker_time,\r\n    min_worker_time,\r\n    max_worker_time,\r\n    total_physical_reads,\r\n    last_physical_reads,\r\n    min_physical_reads, \r\n    max_physical_reads, \r\n    total_logical_writes,\r\n    last_logical_writes,\r\n    min_logical_writes,\r\n    max_logical_writes,\r\n    total_logical_reads,\r\n    last_logical_reads,\r\n    min_logical_reads, \r\n    max_logical_reads,\r\n    total_elapsed_time,\r\n    last_elapsed_time,\r\n    min_elapsed_time,\r\n    max_elapsed_time,\r\n    total_clr_time,\r\n    max_clr_time,\r\n    min_clr_time,\r\n    total_rows,\r\n    min_rows,\r\n    max_rows,\r\n    last_rows,\r\n    query_hash,\r\n    query_plan_hash\r\n----into t_awr_stats\r\nFROM sys.dm_exec_query_stats AS s1\r\nCROSS APPLY sys.dm_exec_sql_text(sql_handle) AS s2 \r\nWHERE s2.objectid is null\r\norder by total_worker_time","Last_elapsed_time":2860,"Max_rows":2,"Min_physical_reads":0,"SQL_handle":"0200000021BDA82932F91AACC2ACDE4CD3A70B0B1241F9360000000000000000000000000000000000000000","Min_worker_time":2013,"Max_logical_reads":0,"Max_worker_time":8133,"Last_physical_reads":0,"Total_worker_time":38118,"Plan_generation_num":1,"Max_clr_time":0,"Date":"2019-04-11 10:30:10.83","Min_elapsed_time":2013,"Last_logical_writes":0,"Total_elapsed_time":38123,"Query_plan_hash":"827CD7C7367E5000","Last_rows":2,"Min_logical_reads":0,"Last_execution_time":"2019-04-11 10:30:10.827","Execution_count":9,"Total_logical_writes":0,"Max_logical_writes":0,"Total_logical_reads":0},
    {"Query_hash":"19922F196E11684F","Last_logical_reads":0,"Min_rows":0,"Total_physical_reads":0,"Max_elapsed_time":62,"Max_physical_reads":0,"Min_logical_writes":0,"Last_worker_time":62,"Min_clr_time":0,"Total_rows":0,"Total_clr_time":0,"SQL_statement":"if not exists (select * from sys.dm_xe_sessions where name = 'telemetry_xevents')","Last_elapsed_time":62,"Max_rows":0,"Min_physical_reads":0,"SQL_handle":"02000000D3B0162AF51C7DEF69938A48896E5622ECE624E10000000000000000000000000000000000000000","Min_worker_time":62,"Max_logical_reads":0,"Max_worker_time":62,"Last_physical_reads":0,"Total_worker_time":62,"Plan_generation_num":1,"Max_clr_time":0,"Date":"2019-04-17 16:58:42.99","Min_elapsed_time":62,"Last_logical_writes":0,"Total_elapsed_time":62,"Query_plan_hash":"C991394B6DC1CF85","Last_rows":0,"Min_logical_reads":0,"Last_execution_time":"2019-04-17 16:58:23.41","Execution_count":1,"Total_logical_writes":0,"Max_logical_writes":0,"Total_logical_reads":0},
    {"Query_hash":"E0E5B47E23770EC3","Last_logical_reads":2,"Min_rows":5,"Total_physical_reads":0,"Max_elapsed_time":42,"Max_physical_reads":0,"Min_logical_writes":0,"Last_worker_time":39,"Min_clr_time":0,"Total_rows":15,"Total_clr_time":0,"SQL_statement":"SELECT * from users","Last_elapsed_time":39,"Max_rows":5,"Min_physical_reads":0,"SQL_handle":"020000000CAA9034F7638BC3874EF961CE06F00DE62A1CA50000000000000000000000000000000000000000","Min_worker_time":38,"Max_logical_reads":2,"Max_worker_time":41,"Last_physical_reads":0,"Total_worker_time":118,"Plan_generation_num":1,"Max_clr_time":0,"Date":"2019-04-17 16:58:42.99","Min_elapsed_time":38,"Last_logical_writes":0,"Total_elapsed_time":119,"Query_plan_hash":"075F1A06D78BBE7D","Last_rows":5,"Min_logical_reads":2,"Last_execution_time":"2019-04-17 16:58:38.94","Execution_count":3,"Total_logical_writes":0,"Max_logical_writes":0,"Total_logical_reads":6},
    {"Query_hash":"52B3B6CEDE6FC57A","Last_logical_reads":216,"Min_rows":1,"Total_physical_reads":0,"Max_elapsed_time":106931,"Max_physical_reads":0,"Min_logical_writes":0,"Last_worker_time":106526,"Min_clr_time":0,"Total_rows":1,"Total_clr_time":0,"SQL_statement":"SELECT target_data\r\n\t\t\t\t\t\t\t\t\tFROM sys.dm_xe_session_targets xet WITH(nolock)\r\n\t\t\t\t\t\t\t\t\tJOIN sys.dm_xe_sessions xes WITH(nolock)\r\n\t\t\t\t\t\t\t\t\tON xes.address = xet.event_session_address\r\n\t\t\t\t\t\t\t\t\tWHERE xes.name = 'telemetry_xevents'\r\n\t\t\t\t\t\t\t\t\tAND xet.target_name = 'ring_buffer'","Last_elapsed_time":106931,"Max_rows":1,"Min_physical_reads":0,"SQL_handle":"020000008604D91CA9F06799CE074F7300128D092E006FD80000000000000000000000000000000000000000","Min_worker_time":106526,"Max_logical_reads":216,"Max_worker_time":106526,"Last_physical_reads":0,"Total_worker_time":106526,"Plan_generation_num":1,"Max_clr_time":0,"Date":"2019-04-17 16:58:42.99","Min_elapsed_time":106931,"Last_logical_writes":0,"Total_elapsed_time":106931,"Query_plan_hash":"99E42039E928E3D9","Last_rows":1,"Min_logical_reads":216,"Last_execution_time":"2019-04-17 16:58:23.18","Execution_count":1,"Total_logical_writes":0,"Max_logical_writes":0,"Total_logical_reads":216}]